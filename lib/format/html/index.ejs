<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Covershot: Home</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/covershot.css">
    <script src="scripts/jquery-1.7.1.min.js"></script>
    <script src="scripts/jquery.tablesort.js"></script>
    <script>
      window.onscroll = function () {
        document.querySelectorAll('#topContainer')[0].className = (window.scrollY !== 0) ? 'shadowed' : '';
      };
    </script>
  </head>
  <body>
    <div id="topContainer">
      <div id="topBar">
        <div id="topBarContent">
          <p class="left">Covershot</p> 
          <p class="right"><a href="index.html" class="selectedFeature">Coverage</a><a href="hotspots.html">Hotspots</a></p>
        </div>
      </div>
      <div id="bottomBar">
        <div class="holder">
          <ul class="summary">
            <li>
              <span class="coverageData"><%= files.length %></span>
              <p>files</p>
            </li>
            <li>
              <span class="coverageData"><%= hits %></span>
              <p>hits</p>
            </li>
            <li>
              <span class="coverageData"><%= misses %></span>
              <p>misses</p>
            </li>
            <li>
              <span class="coverageData"><%= sloc %></span>
              <p>SLoC</p>
            </li>
            <li>
              <span class="coverageData"><%= coverage.toFixed(1) %>%</span>
              <p>coverage</p> 
            </li>
            <li>
              <%- renderPieChart(coverage / 100.0) %> 
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div id="bodyWrapper">
      <section id="bod">
        <section id="mainContent">
          <table id="files">
            <thead>
              <tr>
                <th>Files</th>
                <th class="number">Hits</th>
                <th class="number">Misses</th>
                <th class="number">SLoC</th>
                <% if(hasJsMeterData) { %>
                  <th class="number"><span title="Maintainability Index">MI</span></th>
                <% } %>
                <th>Coverage</th>
              </tr>
            </thead>
            <tbody>
              <% for (var file=0; file<files.length; file++) { %>
              <tr>
                <td>
                  <a href="src/<%= files[file].filename %>.html"><%= files[file].filename %></a>
                </td>
                <td>
                  <p><%= files[file].hits %></p>
                </td>
                <td>
                  <p><%= files[file].misses %></p>
                </td>
                <td>
                  <p><%= files[file].sloc %></p>
                </td>
                <% if(hasJsMeterData) { %>
                  <td>
                    <p><%= files[file].jsmeter ? files[file].jsmeter.mi : '?' %></p>
                  </td>
                <% } %>
                <td data-sort-value="<%= files[file].coverage.toFixed(0) %>">
                  <div class="smplContainer">
                    <div class="smplSubject" style="width: <%= files[file].coverage.toFixed(0) %>%"></div>
                  </div>
                  <p class="coverageParagraph"><%= files[file].coverage.toFixed(0) %>%</p>
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </section>
      </section>
    </div>
    <footer>
      <p>Report generated by <a href="https://github.com/nearinfinity/node-covershot">Covershot</a> on <%= generated %>.</p>
    </footer>
    <script type="text/javascript">
      $(document).ready(function () {
        $('thead th.number').data('sortBy', function(th, td, tablesort) {
          return parseInt(td.text(), 10);
        });
        $('table').tablesort({
          width: 100,
          initSort: {
            index: 2,
            direction: 'desc'
          }
        });
      });
    </script>
  </body>
</html>
